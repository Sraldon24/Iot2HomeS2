<!-- FILE: web_app/templates/control.html (FIXED) -->
{% extends "base.html" %}
{% block content %}

<h2>ğŸ›ï¸ Device Control</h2>

{% if message %}
<div class="card" style="background: #1a4d1a; border-color: #22c55e;">
  <p>âœ… {{ message }}</p>
</div>
{% endif %}

<!-- LED CONTROL -->
<div class="card">
  <h3>ğŸ’¡ LED</h3>
  <div class="device-row">
    <span>Status:</span>
    <span class="device-status {{ 'on' if device_states['led_status'] == '1' else 'off' }}">
      {{ 'ğŸŸ¢ ON' if device_states['led_status'] == '1' else 'ğŸ”´ OFF' }}
    </span>
  </div>
  <div class="device-form">
    <form method="POST" style="display: inline;">
      <input type="hidden" name="device" value="led_status">
      <input type="hidden" name="value" value="1">
      <button type="submit" class="btn-enable">Turn ON</button>
    </form>
    <form method="POST" style="display: inline;">
      <input type="hidden" name="device" value="led_status">
      <input type="hidden" name="value" value="0">
      <button type="submit" class="btn-disable">Turn OFF</button>
    </form>
  </div>
</div>

<!-- BUZZER CONTROL -->
<div class="card">
  <h3>ğŸ”” Buzzer</h3>
  <div class="device-row">
    <span>Status:</span>
    <span class="device-status {{ 'on' if device_states['buzzer_status'] == '1' else 'off' }}">
      {{ 'ğŸŸ¢ ON' if device_states['buzzer_status'] == '1' else 'ğŸ”´ OFF' }}
    </span>
  </div>
  <div class="device-form">
    <form method="POST" style="display: inline;">
      <input type="hidden" name="device" value="buzzer_status">
      <input type="hidden" name="value" value="1">
      <button type="submit" class="btn-enable">Turn ON</button>
    </form>
    <form method="POST" style="display: inline;">
      <input type="hidden" name="device" value="buzzer_status">
      <input type="hidden" name="value" value="0">
      <button type="submit" class="btn-disable">Turn OFF</button>
    </form>
  </div>
</div>

<!-- MOTOR CONTROL -->
<div class="card">
  <h3>ğŸ”§ Motor</h3>
  <div class="device-row">
    <span>Status:</span>
    <span class="device-status {{ 'on' if device_states['motor_status'] == '1' else 'off' }}">
      {{ 'ğŸŸ¢ ON' if device_states['motor_status'] == '1' else 'ğŸ”´ OFF' }}
    </span>
  </div>
  <div class="device-form">
    <form method="POST" style="display: inline;">
      <input type="hidden" name="device" value="motor_status">
      <input type="hidden" name="value" value="1">
      <button type="submit" class="btn-enable">Turn ON</button>
    </form>
    <form method="POST" style="display: inline;">
      <input type="hidden" name="device" value="motor_status">
      <input type="hidden" name="value" value="0">
      <button type="submit" class="btn-disable">Turn OFF</button>
    </form>
  </div>
</div>

{% endblock %}